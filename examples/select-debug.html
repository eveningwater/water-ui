<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Select 组件调试</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      padding: 20px;
    }
    .debug-info {
      background: #f0f0f0;
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <h1>Select 组件调试</h1>
  
  <div class="debug-info">
    <h3>调试信息</h3>
    <div id="debug-output"></div>
  </div>

  <h2>测试选择器</h2>
  <ew-select id="test-select" placeholder="请选择">
    <ew-select-option value="1" label="选项1"></ew-select-option>
    <ew-select-option value="2" label="选项2"></ew-select-option>
    <ew-select-option value="3" label="选项3"></ew-select-option>
  </ew-select>

  <script type="module">
    import { EwSelect, EwSelectOption, EwSelectOptionGroup } from '../packages/core/dist/index.esm.js';
    
    const debugOutput = document.getElementById('debug-output');
    
    function log(message) {
      console.log(message);
      debugOutput.innerHTML += '<div>' + message + '</div>';
    }
    
    // 等待组件加载
    await customElements.whenDefined('ew-select');
    await customElements.whenDefined('ew-select-option');
    await customElements.whenDefined('ew-select-option-group');
    
    log('组件已定义');
    
    const select = document.getElementById('test-select');
    log('Select 元素: ' + (select ? '找到' : '未找到'));
    
    if (select) {
      log('Select 子元素数量: ' + select.children.length);
      
      Array.from(select.children).forEach((child, index) => {
        log(`子元素 ${index}: ${child.tagName} - value: ${child.getAttribute('value')} - label: ${child.getAttribute('label')}`);
      });
      
      // 等待一下让组件完全初始化
      setTimeout(() => {
        log('检查 Shadow DOM');
        if (select.shadowRoot) {
          const dropdown = select.shadowRoot.querySelector('.ew-select__dropdown');
          log('下拉菜单: ' + (dropdown ? '找到' : '未找到'));
          
          if (dropdown) {
            const list = dropdown.querySelector('.ew-select__dropdown-list');
            log('选项列表: ' + (list ? '找到' : '未找到'));
            
            if (list) {
              const options = list.querySelectorAll('.ew-select__option');
              log('选项数量: ' + options.length);
            }
          }
        }
        
        // 点击选择器
        select.addEventListener('click', () => {
          log('选择器被点击');
        });
      }, 1000);
    }
  </script>
</body>
</html> 